steps:
  - name: 'gcr.io/cloud-builders/gcloud'
    id: 'Create Compute Engine Instance'
    args:
      - 'compute'
      - 'instances'
      - 'create'
      - 'my-windows-instance47'  # Instance name
      - '--zone=us-central1-a'
      - '--machine-type=n1-standard-2'
      - '--image-family=windows-2019'
      - '--image-project=windows-cloud'
      - '--boot-disk-size=50GB'  # Disk size (can be adjusted as needed)
      
  - name: 'gcr.io/cloud-builders/gcloud'
    id: 'Set Admin Username and Password'
    args:
      - 'compute'
      - 'reset-windows-password'
      - 'my-windows-instance47'  # Instance name
      - '--zone=us-central1-a'
      - '--user=admin'  # Set the username for RDP


# Service account and logging options
serviceAccount: '878866643834-compute@developer.gserviceaccount.com'  # Specify your Compute Engine service account
logsBucket: 'gs://gcstestex'           # Specify your logs bucket
timeout: '1200s'

# Substitutions for flexibility (optional)
substitutions:
  _INSTANCE_NAME: 'my-windows-instance47'

